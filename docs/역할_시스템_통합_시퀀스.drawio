<mxfile host="app.diagrams.net" agent="Claude Code" version="28.2.5">
  <diagram name="전체 역할 추가 흐름" id="integrated">
    <mxGraphModel dx="1800" dy="1000" grid="10" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="2000" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Title -->
        <mxCell id="title" value="DOT 플랫폼 역할 시스템 - 전체 흐름" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="400" y="30" width="800" height="50" as="geometry" />
        </mxCell>

        <!-- Lifelines -->
        <mxCell id="user" value="User" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;participant=umlActor;" vertex="1" parent="1">
          <mxGeometry x="100" y="120" width="80" height="1800" as="geometry" />
        </mxCell>

        <mxCell id="owner-actor" value="Owner" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;participant=umlActor;" vertex="1" parent="1">
          <mxGeometry x="280" y="120" width="80" height="1800" as="geometry" />
        </mxCell>

        <mxCell id="system" value="System" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="500" y="120" width="120" height="1800" as="geometry" />
        </mxCell>

        <mxCell id="api" value="외부 API&#xa;(국세청)" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="750" y="120" width="120" height="1800" as="geometry" />
        </mxCell>

        <mxCell id="db" value="DB" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="1000" y="120" width="120" height="1800" as="geometry" />
        </mxCell>

        <!-- Phase 0: 회원가입 -->
        <mxCell id="phase0" value="━━━ Phase 0: 회원가입 (기본 상태) ━━━" style="text;html=1;strokeColor=none;fillColor=#fff2cc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="100" y="200" width="1020" height="40" as="geometry" />
        </mxCell>

        <mxCell id="msg0-1" value="회원가입" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;fontSize=11;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="140" y="280" as="sourcePoint" />
            <mxPoint x="560" y="280" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="msg0-2" value="Seeker 역할 자동 부여" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;fontSize=11;strokeColor=#d6b656;strokeWidth=2;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="560" y="320" as="sourcePoint" />
            <mxPoint x="1060" y="320" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="state0" value="현재 역할: [Seeker]" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1200" y="280" width="200" height="40" as="geometry" />
        </mxCell>

        <!-- Phase 1: Owner 역할 추가 (선택) -->
        <mxCell id="phase1" value="━━━ Phase 1: Owner 역할 추가 (선택) ━━━" style="text;html=1;strokeColor=none;fillColor=#d5e8d4;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="100" y="400" width="1020" height="40" as="geometry" />
        </mxCell>

        <mxCell id="msg1-1" value="사업자등록증 제출" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;fontSize=11;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="140" y="480" as="sourcePoint" />
            <mxPoint x="560" y="480" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="msg1-2" value="검증 요청" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;fontSize=11;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="560" y="530" as="sourcePoint" />
            <mxPoint x="810" y="530" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="msg1-3" value="검증 성공" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;rounded=0;dashed=1;fontSize=11;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="810" y="570" as="sourcePoint" />
            <mxPoint x="560" y="570" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="msg1-4" value="Owner 역할 추가" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;fontSize=11;strokeColor=#82b366;strokeWidth=2;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="560" y="610" as="sourcePoint" />
            <mxPoint x="1060" y="610" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="msg1-5" value="Owner 역할 부여됨" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;rounded=0;dashed=1;fontSize=11;strokeColor=#82b366;strokeWidth=2;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="560" y="650" as="sourcePoint" />
            <mxPoint x="140" y="650" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="state1" value="현재 역할: [Seeker, Owner]" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1200" y="480" width="200" height="40" as="geometry" />
        </mxCell>

        <mxCell id="alt1" value="alt" style="shape=umlFrame;whiteSpace=wrap;html=1;width=60;height=30;boundedLbl=1;verticalAlign=middle;align=left;spacingLeft=5;" vertex="1" parent="1">
          <mxGeometry x="80" y="450" width="1060" height="240" as="geometry" />
        </mxCell>

        <mxCell id="skip1" value="[건너뛰기] Owner 역할 추가 안 함" style="text;html=1;strokeColor=none;fillColor=#f5f5f5;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=2" vertex="1" parent="1">
          <mxGeometry x="200" y="665" width="800" height="20" as="geometry" />
        </mxCell>

        <!-- Phase 2: Worker 역할 추가 (선택) -->
        <mxCell id="phase2" value="━━━ Phase 2: Worker 역할 추가 (선택) ━━━" style="text;html=1;strokeColor=none;fillColor=#dae8fc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="100" y="740" width="1020" height="40" as="geometry" />
        </mxCell>

        <mxCell id="msg2-1" value="근로계약서 작성" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;fontSize=11;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="320" y="820" as="sourcePoint" />
            <mxPoint x="560" y="820" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="msg2-2" value="계약서 전송" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;fontSize=11;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="560" y="860" as="sourcePoint" />
            <mxPoint x="140" y="860" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="msg2-3" value="서명 (동의)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;fontSize=11;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="140" y="900" as="sourcePoint" />
            <mxPoint x="560" y="900" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="msg2-4" value="Worker 역할 추가" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;fontSize=11;strokeColor=#6c8ebf;strokeWidth=2;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="560" y="940" as="sourcePoint" />
            <mxPoint x="1060" y="940" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="msg2-5" value="Worker 역할 부여됨" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;rounded=0;dashed=1;fontSize=11;strokeColor=#6c8ebf;strokeWidth=2;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="560" y="980" as="sourcePoint" />
            <mxPoint x="140" y="980" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="state2" value="현재 역할: [Seeker, Worker]&#xa;또는 [Seeker, Owner, Worker]" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;fontStyle=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="1200" y="820" width="200" height="60" as="geometry" />
        </mxCell>

        <mxCell id="alt2" value="alt" style="shape=umlFrame;whiteSpace=wrap;html=1;width=60;height=30;boundedLbl=1;verticalAlign=middle;align=left;spacingLeft=5;" vertex="1" parent="1">
          <mxGeometry x="80" y="790" width="1060" height="230" as="geometry" />
        </mxCell>

        <mxCell id="skip2" value="[건너뛰기] Worker 역할 추가 안 함" style="text;html=1;strokeColor=none;fillColor=#f5f5f5;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=2" vertex="1" parent="1">
          <mxGeometry x="200" y="995" width="800" height="20" as="geometry" />
        </mxCell>

        <!-- Phase 3: Manager 역할 추가 (Worker 필수!) -->
        <mxCell id="phase3" value="━━━ Phase 3: Manager 역할 추가 (⚠️ Worker 필수!) ━━━" style="text;html=1;strokeColor=none;fillColor=#f8cecc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="100" y="1070" width="1020" height="40" as="geometry" />
        </mxCell>

        <mxCell id="prereq" value="⚠️ 조건 체크: Worker 역할 필수" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1200" y="1070" width="200" height="40" as="geometry" />
        </mxCell>

        <mxCell id="msg3-0" value="Worker 역할 확인" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;fontSize=11;strokeColor=#d79b00;dashed=1;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="560" y="1150" as="sourcePoint" />
            <mxPoint x="1060" y="1150" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="msg3-00" value="Worker 확인됨" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;rounded=0;dashed=1;fontSize=11;strokeColor=#d79b00;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1060" y="1180" as="sourcePoint" />
            <mxPoint x="560" y="1180" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="msg3-1" value="권한위임장 작성" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;fontSize=11;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="320" y="1220" as="sourcePoint" />
            <mxPoint x="560" y="1220" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="msg3-2" value="위임장 전송" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;fontSize=11;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="560" y="1260" as="sourcePoint" />
            <mxPoint x="140" y="1260" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="msg3-3" value="수락" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;fontSize=11;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="140" y="1300" as="sourcePoint" />
            <mxPoint x="560" y="1300" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="msg3-4" value="Manager 역할 추가" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;fontSize=11;strokeColor=#b85450;strokeWidth=2;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="560" y="1340" as="sourcePoint" />
            <mxPoint x="1060" y="1340" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="msg3-5" value="Manager 역할 부여됨" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=open;rounded=0;dashed=1;fontSize=11;strokeColor=#b85450;strokeWidth=2;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="560" y="1380" as="sourcePoint" />
            <mxPoint x="140" y="1380" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="state3" value="현재 역할:&#xa;[Seeker, Worker, Manager]&#xa;또는&#xa;[Seeker, Owner, Worker, Manager]" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;fontStyle=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="1200" y="1220" width="240" height="80" as="geometry" />
        </mxCell>

        <mxCell id="opt3" value="opt" style="shape=umlFrame;whiteSpace=wrap;html=1;width=60;height=30;boundedLbl=1;verticalAlign=middle;align=left;spacingLeft=5;" vertex="1" parent="1">
          <mxGeometry x="80" y="1130" width="1060" height="290" as="geometry" />
        </mxCell>

        <mxCell id="condition3" value="[Worker 역할 보유 시에만]" style="text;html=1;strokeColor=none;fillColor=#ffe6cc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="160" y="1135" width="200" height="20" as="geometry" />
        </mxCell>

        <mxCell id="skip3" value="[Worker 없음] Manager 역할 추가 불가 ❌" style="text;html=1;strokeColor=none;fillColor=#f5f5f5;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=2" vertex="1" parent="1">
          <mxGeometry x="200" y="1395" width="800" height="20" as="geometry" />
        </mxCell>

        <!-- Summary Box -->
        <mxCell id="summary-title" value="━━━ 최종 가능한 역할 조합 ━━━" style="text;html=1;strokeColor=none;fillColor=#e1d5e7;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="100" y="1500" width="1340" height="40" as="geometry" />
        </mxCell>

        <mxCell id="combo1" value="✅ [Seeker]" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=13;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="120" y="1580" width="280" height="50" as="geometry" />
        </mxCell>

        <mxCell id="combo2" value="✅ [Seeker, Owner]" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=13;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="440" y="1580" width="280" height="50" as="geometry" />
        </mxCell>

        <mxCell id="combo3" value="✅ [Seeker, Worker]" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=13;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="760" y="1580" width="280" height="50" as="geometry" />
        </mxCell>

        <mxCell id="combo4" value="✅ [Seeker, Worker, Manager]" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=13;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1080" y="1580" width="320" height="50" as="geometry" />
        </mxCell>

        <mxCell id="combo5" value="✅ [Seeker, Owner, Worker]" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=13;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="120" y="1660" width="320" height="50" as="geometry" />
        </mxCell>

        <mxCell id="combo6" value="✅ [Seeker, Owner, Worker, Manager]" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=13;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="480" y="1660" width="380" height="50" as="geometry" />
        </mxCell>

        <mxCell id="combo-invalid" value="❌ Manager만 (Worker 없이) - 불가능!" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=13;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="900" y="1660" width="500" height="50" as="geometry" />
        </mxCell>

        <!-- Legend -->
        <mxCell id="legend" value="범례" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="120" y="1770" width="100" height="30" as="geometry" />
        </mxCell>

        <mxCell id="legend1" value="alt = 선택 (어느 하나)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="120" y="1800" width="200" height="30" as="geometry" />
        </mxCell>

        <mxCell id="legend2" value="opt = 선택적 (있어도 되고 없어도 됨)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="120" y="1830" width="300" height="30" as="geometry" />
        </mxCell>

        <mxCell id="legend3" value="실선 = 요청, 점선 = 응답" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="120" y="1860" width="250" height="30" as="geometry" />
        </mxCell>

        <mxCell id="key-point" value="🔑 핵심: Manager는 Worker 없이 불가능! Worker 역할이 반드시 선행되어야 함" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="500" y="1790" width="900" height="80" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>