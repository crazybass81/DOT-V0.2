# DOT í”Œë«í¼ ì—­í•  ì‹œìŠ¤í…œ ìš”ì•½

## ğŸ­ 4ê°€ì§€ ì—­í• 

| ì—­í•  | ë¶€ì—¬ ì¡°ê±´ | í•„ìˆ˜ ë¬¸ì„œ | ì‚­ì œ ê°€ëŠ¥ |
|------|----------|-----------|-----------|
| **SEEKER** | íšŒì›ê°€ì… ì‹œ ìë™ | - | âŒ (ì˜êµ¬) |
| **OWNER** | ì‚¬ì—…ìë“±ë¡ì¦ ì œì¶œ + ê²€ì¦ | ì‚¬ì—…ìë“±ë¡ì¦ | âœ… |
| **WORKER** | ê·¼ë¡œê³„ì•½ì„œ ì²´ê²° | ê·¼ë¡œê³„ì•½ì„œ | âœ… |
| **MANAGER** | Worker + ê¶Œí•œìœ„ì„ì¥ | ê¶Œí•œìœ„ì„ì¥ | âœ… |

---

## ğŸ”„ ì—­í•  íšë“ íë¦„

```
                         ì‚¬ì—…ìë“±ë¡ì¦
            [Seeker] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ [Owner]
                â”‚
                â”‚ ê·¼ë¡œê³„ì•½ì„œ
                â†“
            [Worker] â”€ê¶Œí•œìœ„ì„ì¥â†’ [Manager]
```

**í•µì‹¬ ê·œì¹™:**
- âœ… SeekerëŠ” ëª¨ë“  ìœ ì €ì˜ ê¸°ë³¸ (ì‚­ì œ ë¶ˆê°€)
- âœ… Owner, WorkerëŠ” ë…ë¦½ì  (ìˆœì„œ ë¬´ê´€)
- âš ï¸ **ManagerëŠ” Worker í•„ìˆ˜** (Worker ì—†ìœ¼ë©´ Manager ë  ìˆ˜ ì—†ìŒ)

---

## ğŸ“Š ë‹¤ì¤‘ ì¸ìŠ¤í„´ìŠ¤

**í•œ ìœ ì €ê°€ ë™ì‹œ ë³´ìœ  ê°€ëŠ¥:**
- SEEKER: 1ê°œ (ê³ ì •)
- OWNER: Nê°œ (ì‚¬ì—…ì¥ë³„)
- WORKER: Nê°œ (ì‚¬ì—…ì¥ë³„)
- MANAGER: Nê°œ (ì‚¬ì—…ì¥ë³„ Workerì—ì„œ ìŠ¹ê²©)

**ì˜ˆì‹œ: ê¹€ì² ìˆ˜**
```
ê¹€ì² ìˆ˜
â”œâ”€ SEEKER (ê¸°ë³¸)
â”œâ”€ OWNER - ì¹´í˜A
â”œâ”€ OWNER - í¸ì˜ì B
â”œâ”€ WORKER - ë ˆìŠ¤í† ë‘C â†’ MANAGER - ë ˆìŠ¤í† ë‘C (ê¶Œí•œìœ„ì„)
â””â”€ WORKER - ì¹´í˜D
```

---

## ğŸ” ì—­í• ë³„ ê¶Œí•œ

### SEEKER (ê¸°ë³¸)
- ê³µê³  ê²€ìƒ‰
- ì‚¬ì—…ì¥ ì§€ì›
- í”„ë¡œí•„ ê´€ë¦¬

### OWNER (ì‚¬ì—…ì£¼)
- ì±„ìš© ê³µê³  ë“±ë¡
- ê·¼ë¡œê³„ì•½ì„œ ì‘ì„±
- ì§ì› ê´€ë¦¬ (ì „ì²´)
- ê·¼íƒœ/ê¸‰ì—¬ ê´€ë¦¬

### WORKER (ê·¼ë¡œì)
- ì¶œí‡´ê·¼ ê¸°ë¡
- ê·¼ë¬´ ì¼ì • í™•ì¸
- ê¸‰ì—¬ ëª…ì„¸ì„œ ì¡°íšŒ

### MANAGER (ê´€ë¦¬ì)
- **Worker ê¶Œí•œ ëª¨ë‘ í¬í•¨**
- ì§ì› ê´€ë¦¬ (ì¼ë¶€)
- ê·¼íƒœ ìŠ¹ì¸
- ì¼ì • ì¡°ìœ¨
- ë³´ê³ ì„œ ì‘ì„±

---

## ğŸ’¾ ë°ì´í„° êµ¬ì¡°

```typescript
// UserRole í…Œì´ë¸”
{
  id: string
  userId: string
  role: 'SEEKER' | 'OWNER' | 'WORKER' | 'MANAGER'
  workplaceId: string
  documentId: string  // ì‚¬ì—…ìë“±ë¡ì¦ or ê·¼ë¡œê³„ì•½ì„œ or ê¶Œí•œìœ„ì„ì¥
  grantedAt: Date
  revokedAt?: Date
}
```

---

## âš ï¸ Manager ì—­í•  íŠ¹ë³„ ê·œì¹™

### 1. Worker ì„ í–‰ ì¡°ê±´
```typescript
// âŒ ë¶ˆê°€ëŠ¥
User.addRole('MANAGER')  // Worker ì—†ì´ ë°”ë¡œ Manager

// âœ… ê°€ëŠ¥
User.addRole('WORKER')   // 1. ë¨¼ì € Worker
User.addRole('MANAGER')  // 2. ê·¸ ë‹¤ìŒ Manager
```

### 2. Worker í•´ì œ ì‹œ Managerë„ ìë™ í•´ì œ
```typescript
// Worker ì—­í•  í•´ì œ â†’ Managerë„ í•¨ê»˜ í•´ì œ
User.removeRole('WORKER', workplaceId)
â†’ User.removeRole('MANAGER', workplaceId) // ìë™
```

### 3. ì‚¬ì—…ì¥ë³„ ë…ë¦½ì 
```typescript
// ê°€ëŠ¥í•œ ì¡°í•©
- ë ˆìŠ¤í† ë‘A: Worker + Manager
- ì¹´í˜B: Worker (Manager ì•„ë‹˜)
- í¸ì˜ì C: Worker + Manager
```

---

## ğŸ“ ì‹¤ì œ ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: ì¼ë°˜ ì•Œë°”ìƒ â†’ ë§¤ë‹ˆì € ìŠ¹ì§„
```
Day 1: ì¹´í˜ ì§€ì› â†’ Worker ì—­í•  ë¶€ì—¬
Day 30: ì„±ê³¼ ìš°ìˆ˜ â†’ Ownerê°€ ê¶Œí•œìœ„ì„ì¥ ë°œê¸‰
Day 30: Manager ì—­í•  ì¶”ê°€ (WorkerëŠ” ìœ ì§€)

ì—­í• : [Seeker, Worker(ì¹´í˜), Manager(ì¹´í˜)]
```

### ì‹œë‚˜ë¦¬ì˜¤ 2: ë‹¤ì¤‘ ì‚¬ì—…ì¥ ê·¼ë¬´
```
ê¹€ì˜í¬:
- ë ˆìŠ¤í† ë‘A: Worker + Manager (ë¶€ë§¤ë‹ˆì €)
- ì¹´í˜B: Worker (ì¼ë°˜ ì•Œë°”)
- í¸ì˜ì C: Owner (ë³¸ì¸ ì‚¬ì—…)

ì—­í• : [Seeker, Owner(í¸ì˜ì C), Worker(A), Manager(A), Worker(B)]
```

### ì‹œë‚˜ë¦¬ì˜¤ 3: Manager í•´ì œ
```
ë ˆìŠ¤í† ë‘ì—ì„œ í‡´ì‚¬:
1. Worker ì—­í•  í•´ì œ
2. Manager ì—­í•  ìë™ í•´ì œ (Worker ì—†ìœ¼ë©´ Manager ë¶ˆê°€)
3. Seeker ì—­í• ì€ ìœ ì§€ â†’ ë‹¤ì‹œ êµ¬ì§ í™œë™ ê°€ëŠ¥
```

---

## ğŸ” ê¶Œí•œ ì²´í¬ ë¡œì§

```typescript
// Manager ê¶Œí•œ ë¶€ì—¬ ê°€ëŠ¥ ì—¬ë¶€
function canBecomeManager(user: User, workplaceId: string): boolean {
  // Worker ì—­í• ì´ í•„ìˆ˜
  return user.hasRole('WORKER', workplaceId);
}

// Manager ê¶Œí•œ ì²´í¬
function hasManagerPermission(user: User, workplaceId: string): boolean {
  return user.hasRole('MANAGER', workplaceId);
}

// Worker í•´ì œ ì‹œ Managerë„ í•¨ê»˜ í•´ì œ
async function removeWorkerRole(user: User, workplaceId: string) {
  await user.removeRole('WORKER', workplaceId);

  // Manager ì—­í• ì´ ìˆë‹¤ë©´ í•¨ê»˜ í•´ì œ
  if (user.hasRole('MANAGER', workplaceId)) {
    await user.removeRole('MANAGER', workplaceId);
  }
}
```

---

## ğŸ“Œ ìš”ì•½

1. **ê¸°ë³¸ ì—­í• **: Seeker (ëª¨ë“  ìœ ì €, ì˜êµ¬)
2. **ë…ë¦½ ì—­í• **: Owner, Worker (ìˆœì„œ ë¬´ê´€)
3. **ì¢…ì† ì—­í• **: Manager (Worker í•„ìˆ˜)
4. **ë‹¤ì¤‘ ë³´ìœ **: ëª¨ë“  ì—­í•  ì‚¬ì—…ì¥ë³„ ì—¬ëŸ¬ ê°œ ê°€ëŠ¥
5. **ë¬¸ì„œ ê¸°ë°˜**: ì‚¬ì—…ìë“±ë¡ì¦, ê·¼ë¡œê³„ì•½ì„œ, ê¶Œí•œìœ„ì„ì¥